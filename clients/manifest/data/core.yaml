plugin_id: core
version: 1.0.0
description: Core authentication and user management
base_path: /api/auth

types:
  - name: User
    description: User account
    fields:
      id: string!
      email: string!
      name: string
      emailVerified: boolean!
      createdAt: string!
      updatedAt: string!
      organizationId: string

  - name: Session
    description: User session
    fields:
      id: string!
      userId: string!
      token: string!
      expiresAt: string!
      ipAddress: string
      userAgent: string
      createdAt: string!

  - name: Device
    description: User device
    fields:
      id: string!
      userId: string!
      name: string
      type: string
      lastUsedAt: string!
      ipAddress: string
      userAgent: string

routes:
  - name: SignUp
    description: Create a new user account
    method: POST
    path: /signup
    request:
      email: string!
      password: string!
      name: string
    response:
      user: User!
      session: Session!
    errors:
      - code: 400
        description: Invalid request data
      - code: 409
        description: Email already exists

  - name: SignIn
    description: Sign in with email and password
    method: POST
    path: /signin
    request:
      email: string!
      password: string!
    response:
      user: User!
      session: Session!
      requiresTwoFactor: boolean
    errors:
      - code: 400
        description: Invalid credentials
      - code: 403
        description: Account locked

  - name: SignOut
    description: Sign out and invalidate session
    method: POST
    path: /signout
    auth: true
    response:
      success: boolean!
    errors:
      - code: 401
        description: Not authenticated

  - name: GetSession
    description: Get current session information
    method: GET
    path: /session
    auth: true
    response:
      user: User!
      session: Session!
    errors:
      - code: 401
        description: Not authenticated

  - name: UpdateUser
    description: Update current user profile
    method: POST
    path: /user/update
    auth: true
    request:
      name: string
      email: string
    response:
      user: User!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated

  - name: ListDevices
    description: List user devices
    method: GET
    path: /devices
    auth: true
    response:
      devices: Device[]!
    errors:
      - code: 401
        description: Not authenticated

  - name: RevokeDevice
    description: Revoke a device
    method: POST
    path: /devices/revoke
    auth: true
    request:
      deviceId: string!
    response:
      success: boolean!
    errors:
      - code: 400
        description: Invalid device ID
      - code: 401
        description: Not authenticated

