plugin_id: notification
version: 1.0.0
routes:
    - name: PreviewTemplate
      description: PreviewTemplate handles template preview requests
      method: POST
      path: /:id/preview
      request:
        variables: '!'
      request_type: PreviewTemplate_req
    - name: CreateTemplate
      description: CreateTemplate creates a new notification template
      method: POST
      path: /createtemplate
      request_type: notification.CreateTemplateRequest
    - name: GetTemplate
      description: GetTemplate retrieves a template by ID
      method: GET
      path: /:id
    - name: ListTemplates
      description: ListTemplates lists all templates with pagination
      method: GET
      path: /listtemplates
    - name: UpdateTemplate
      description: UpdateTemplate updates a template
      method: PUT
      path: /:id
      request_type: notification.UpdateTemplateRequest
      response_type: MessageResponse
    - name: DeleteTemplate
      description: DeleteTemplate deletes a template
      method: DELETE
      path: /:id
      response_type: MessageResponse
    - name: ResetTemplate
      description: ResetTemplate resets a template to default values
      method: POST
      path: /:id/reset
      response_type: MessageResponse
    - name: ResetAllTemplates
      description: ResetAllTemplates resets all templates for an app to defaults
      method: POST
      path: /reset-all
      response_type: MessageResponse
    - name: GetTemplateDefaults
      description: GetTemplateDefaults returns default template metadata
      method: GET
      path: /defaults
    - name: PreviewTemplate
      description: PreviewTemplate renders a template with provided variables
      method: POST
      path: /:id/preview
      request:
        variables: '!'
      request_type: PreviewTemplate_req
    - name: RenderTemplate
      description: RenderTemplate renders a template string with variables (no template ID required)
      method: POST
      path: /render
      request:
        template: string!
        variables: '!'
      request_type: RenderTemplate_req
    - name: SendNotification
      description: SendNotification sends a notification
      method: POST
      path: /send
      request_type: notification.SendRequest
    - name: GetNotification
      description: GetNotification retrieves a notification by ID
      method: GET
      path: /:id
    - name: ListNotifications
      description: ListNotifications lists all notifications with pagination
      method: GET
      path: /listnotifications
    - name: ResendNotification
      description: ResendNotification resends a notification
      method: POST
      path: /:id/resend
    - name: HandleWebhook
      description: HandleWebhook handles provider webhook callbacks
      method: POST
      path: /notifications/webhook/:provider
      response_type: StatusResponse
types:
    - name: TemplatesResponse
      fields:
        count: int!
        templates: '!'
    - name: Adapter
      fields:
        "": '*TemplateService'
    - name: SMSProviderConfig
      fields:
        config: '!'
        from: string!
        provider: string!
    - name: TestSendTemplate_req
      fields:
        recipient: string!
        variables: '!'
    - name: TestProvider_req
      fields:
        config: '!'
        providerName: string!
        providerType: string!
        testRecipient: string!
    - name: NotificationsResponse
      fields:
        count: int!
        notifications: '!'
    - name: NotificationTemplateResponse
      fields:
        template: '!'
    - name: SendWithTemplateRequest
      fields:
        appId: xid.ID!
        language: string!
        metadata: '!'
        recipient: string!
        templateKey: string!
        type: notification.NotificationType!
        variables: '!'
    - name: Handler
      fields:
        "": '*notification.AnalyticsService'
    - name: DeclareABTestWinner_req
      fields:
        abTestGroup: string!
        winnerId: string!
    - name: NotificationWebhookResponse
      fields:
        status: string!
    - name: PreviewTemplate_req
      fields:
        variables: '!'
    - name: UpdateProvider_req
      fields:
        config: '!'
        isActive: bool!
        isDefault: bool!
    - name: Plugin
      fields:
        "": forge.ConfigManager
    - name: NotificationTemplateListResponse
      fields:
        templates: '[]!'
        total: int!
    - name: NotificationPreviewResponse
      fields:
        body: string!
        subject: string!
    - name: EmailProviderConfig
      fields:
        config: '!'
        from: string!
        from_name: string!
        provider: string!
        reply_to: string!
    - name: TemplateDefault
      fields:
        "": string
    - name: RenderTemplate_req
      fields:
        template: string!
        variables: '!'
    - name: TemplateService
      fields:
        "": Config
    - name: DashboardExtension
      fields:
        "": '*dashboard.ExtensionRegistry'
    - name: NotificationResponse
      fields:
        notification: '!'
    - name: TemplateEngine
      fields:
        "": template.FuncMap
    - name: RateLimit
      fields:
        max_requests: int!
        window: time.Duration!
    - name: SaveNotificationSettings_req
      fields:
        autoSendWelcome: bool!
        cleanupAfter: string!
        retryAttempts: int!
        retryDelay: string!
    - name: NotificationErrorResponse
      fields:
        error: string!
    - name: NotificationStatusResponse
      fields:
        status: string!
    - name: Config
      fields:
        add_default_templates: bool!
        allow_app_overrides: bool!
        allow_template_reset: bool!
        auto_populate_templates: bool!
        auto_send_welcome: bool!
        cleanup_after: time.Duration!
        default_language: string!
        providers: ProvidersConfig!
        rate_limits: '!'
        retry_attempts: int!
        retry_delay: time.Duration!
    - name: ProvidersConfig
      fields:
        email: EmailProviderConfig!
        sms: '*SMSProviderConfig!'
    - name: ChannelsResponse
      fields:
        channels: '!'
        count: int!
    - name: TrackNotificationEvent_req
      fields:
        event: string!
        eventData: ""
        notificationId: string!
        organizationId: '*string'
        templateId: string!
    - name: CreateProvider_req
      fields:
        config: '!'
        isDefault: bool!
        organizationId: '*string'
        providerName: string!
        providerType: string!
    - name: CreateTemplateVersion_req
      fields:
        changes: string!
    - name: CreateABTestVariant_req
      fields:
        body: string!
        name: string!
        subject: string!
        weight: int!
    - name: NotificationListResponse
      fields:
        notifications: '[]!'
        total: int!
