plugin_id: notification
version: 1.0.0
routes:
    - name: CreateTemplate
      description: CreateTemplate creates a new notification template
      method: POST
      path: /templates
      response:
        template: '!'
      request_type: notification.CreateTemplateRequest
      response_type: NotificationTemplateResponse
    - name: GetTemplate
      description: GetTemplate retrieves a template by ID
      method: GET
      path: /templates/:id
      response:
        template: '!'
      response_type: NotificationTemplateResponse
    - name: ListTemplates
      description: ListTemplates lists all templates with pagination
      method: GET
      path: /templates
      response:
        templates: '[]!'
        total: int!
      response_type: NotificationTemplateListResponse
    - name: UpdateTemplate
      description: UpdateTemplate updates a template
      method: PUT
      path: /templates/:id
      response:
        template: '!'
      request_type: notification.UpdateTemplateRequest
      response_type: NotificationTemplateResponse
    - name: DeleteTemplate
      description: DeleteTemplate deletes a template
      method: DELETE
      path: /templates/:id
      response:
        status: string!
      response_type: NotificationStatusResponse
    - name: ResetTemplate
      description: ResetTemplate resets a template to default values
      method: POST
      path: /templates/:id/reset
      response:
        status: string!
      response_type: NotificationStatusResponse
    - name: ResetAllTemplates
      description: ResetAllTemplates resets all templates for an app to defaults
      method: POST
      path: /templates/reset-all
      response:
        status: string!
      response_type: NotificationStatusResponse
    - name: GetTemplateDefaults
      description: GetTemplateDefaults returns default template metadata
      method: GET
      path: /templates/defaults
      response:
        templates: '[]!'
        total: int!
      response_type: NotificationTemplateListResponse
    - name: PreviewTemplate
      description: PreviewTemplate renders a template with provided variables
      method: POST
      path: /templates/:id/preview
      request:
        variables: '!'
      response:
        body: string!
        subject: string!
      request_type: PreviewTemplate_req
      response_type: NotificationPreviewResponse
    - name: RenderTemplate
      description: RenderTemplate renders a template string with variables (no template ID required)
      method: POST
      path: /templates/render
      request:
        template: string!
        variables: '!'
      response:
        body: string!
        subject: string!
      request_type: RenderTemplate_req
      response_type: NotificationPreviewResponse
    - name: SendNotification
      description: SendNotification sends a notification
      method: POST
      path: /notifications/send
      response:
        notification: '!'
      request_type: notification.SendRequest
      response_type: NotificationResponse
    - name: GetNotification
      description: GetNotification retrieves a notification by ID
      method: GET
      path: /notifications/:id
      response:
        notification: '!'
      response_type: NotificationResponse
    - name: ListNotifications
      description: ListNotifications lists all notifications with pagination
      method: GET
      path: /notifications
      response:
        notifications: '[]!'
        total: int!
      response_type: NotificationListResponse
    - name: ResendNotification
      description: ResendNotification resends a notification
      method: POST
      path: /notifications/:id/resend
      response:
        notification: '!'
      response_type: NotificationResponse
    - name: HandleWebhook
      description: HandleWebhook handles provider webhook callbacks
      method: POST
      path: /notifications/webhook/:provider
      response:
        status: string!
      response_type: NotificationWebhookResponse
types:
    - name: AuthAutoSendConfig
      fields:
        email_otp: bool!
        magic_link: bool!
        mfa_code: bool!
        password_reset: bool!
        verification_email: bool!
        welcome: bool!
    - name: EmailProviderConfig
      fields:
        config: '!'
        from: string!
        from_name: string!
        provider: string!
        reply_to: string!
    - name: TemplatesResponse
      fields:
        count: int!
        templates: '!'
    - name: ProvidersConfigDTO
      fields:
        emailProvider: EmailProviderDTO!
        smsProvider: SMSProviderDTO!
    - name: CreateTemplateVersion_req
      fields:
        changes: string!
    - name: DeleteProviderRequest
      fields:
        "": string
    - name: GetABTestResultsRequest
      fields:
        "": string
    - name: DeclareABTestWinnerRequest
      fields:
        "": string
    - name: AsyncAdapter
      fields:
        "": '*notification.RetryService'
    - name: UpdateTemplateResult
      fields:
        message: string!
        success: bool!
        template: TemplateDTO!
    - name: GetAnalyticsInput
      fields:
        days: '*int!'
        endDate: '*string!'
        startDate: '*string!'
        templateId: '*string!'
    - name: ListNotificationsHistoryResult
      fields:
        notifications: '[]NotificationHistoryDTO!'
        pagination: PaginationDTO!
    - name: RateLimit
      fields:
        max_requests: int!
        window: time.Duration!
    - name: DeleteTemplateRequest
      fields:
        "": string
    - name: ResetTemplateRequest
      fields:
        "": string
    - name: DeleteTemplateResult
      fields:
        message: string!
        success: bool!
    - name: SendWithTemplateRequest
      fields:
        appId: xid.ID!
        language: string!
        metadata: '!'
        recipient: string!
        templateKey: string!
        type: notification.NotificationType!
        variables: '!'
    - name: PreviewTemplateInput
      fields:
        templateId: string!
        variables: '!'
    - name: OrganizationAutoSendConfig
      fields:
        deleted: bool!
        invite: bool!
        member_added: bool!
        member_left: bool!
        member_removed: bool!
        role_changed: bool!
        transfer: bool!
    - name: GetProviderRequest
      fields:
        "": string
    - name: UpdateSettingsResult
      fields:
        message: string!
        settings: NotificationSettingsDTO!
        success: bool!
    - name: NotificationSettingsDTO
      fields:
        account: AccountAutoSendDTO!
        appName: string!
        auth: AuthAutoSendDTO!
        organization: OrganizationAutoSendDTO!
        session: SessionAutoSendDTO!
    - name: AccountAutoSendDTO
      fields:
        deleted: bool!
        emailChangeRequest: bool!
        emailChanged: bool!
        passwordChanged: bool!
        reactivated: bool!
        suspended: bool!
        usernameChanged: bool!
    - name: AsyncConfig
      fields:
        enabled: bool!
        max_retries: int!
        persist_failures: bool!
        queue_size: int!
        retry_backoff: '[]string!'
        retry_enabled: bool!
        worker_pool_size: int!
    - name: settingField
      fields:
        "": bool
    - name: ChannelsResponse
      fields:
        channels: '!'
        count: int!
    - name: NotificationTemplateListResponse
      fields:
        templates: '[]!'
        total: int!
    - name: GetOverviewStatsInput
      fields:
        days: '*int!'
        endDate: '*string!'
        startDate: '*string!'
    - name: GetOverviewStatsResult
      fields:
        stats: OverviewStatsDTO!
    - name: ListTemplatesInput
      fields:
        active: '*bool!'
        language: '*string!'
        limit: int!
        page: int!
        type: '*string!'
    - name: UpdateTemplateInput
      fields:
        active: '*bool!'
        body: '*string!'
        metadata: '!'
        name: '*string!'
        subject: '*string!'
        templateId: string!
        variables: '[]string!'
    - name: TestSendTemplateResult
      fields:
        message: string!
        success: bool!
    - name: OverviewStatsDTO
      fields:
        bounceRate: float64!
        clickRate: float64!
        deliveryRate: float64!
        openRate: float64!
        totalBounced: int64!
        totalClicked: int64!
        totalDelivered: int64!
        totalFailed: int64!
        totalOpened: int64!
        totalSent: int64!
    - name: GetProvidersInput
      fields: {}
    - name: DashboardExtension
      fields:
        "": '*Plugin'
    - name: GetSettingsInput
      fields: {}
    - name: TestSendTemplateInput
      fields:
        recipient: string!
        templateId: string!
        variables: '!'
    - name: TestProviderInput
      fields:
        providerType: string!
        recipient: string!
    - name: EmailProviderDTO
      fields:
        config: '!'
        enabled: bool!
        fromEmail: string!
        fromName: string!
        type: string!
    - name: TemplateDefault
      fields:
        "": string
    - name: Plugin
      fields:
        "": '*notification.RetryService'
    - name: NotificationResponse
      fields:
        notification: '!'
    - name: TemplateEngine
      fields:
        "": template.FuncMap
    - name: DailyAnalyticsDTO
      fields:
        date: string!
        deliveryRate: float64!
        openRate: float64!
        totalClicked: int64!
        totalDelivered: int64!
        totalOpened: int64!
        totalSent: int64!
    - name: PaginationDTO
      fields:
        currentPage: int!
        hasNext: bool!
        hasPrev: bool!
        pageSize: int!
        totalCount: int64!
        totalPages: int!
    - name: NotificationHistoryDTO
      fields:
        appId: string!
        body: string!
        createdAt: string!
        deliveredAt: '*string!'
        error: string!
        id: string!
        metadata: '!'
        providerId: string!
        recipient: string!
        sentAt: '*string!'
        status: string!
        subject: string!
        templateId: '*string!'
        type: string!
        updatedAt: string!
    - name: Handler
      fields:
        "": '*TemplateService'
    - name: NotificationsResponse
      fields:
        count: int!
        notifications: '!'
    - name: CreateProvider_req
      fields:
        config: '!'
        isDefault: bool!
        organizationId: '*string'
        providerName: string!
        providerType: string!
    - name: NotificationErrorResponse
      fields:
        error: string!
    - name: NotificationTemplateResponse
      fields:
        template: '!'
    - name: Adapter
      fields:
        "": ""
    - name: UpdateSettingsInput
      fields:
        account: '*AccountAutoSendDTO!'
        appName: string!
        auth: '*AuthAutoSendDTO!'
        organization: '*OrganizationAutoSendDTO!'
        session: '*SessionAutoSendDTO!'
    - name: GetTemplateInput
      fields:
        templateId: string!
    - name: UpdateProvidersResult
      fields:
        message: string!
        providers: ProvidersConfigDTO!
        success: bool!
    - name: SaveBuilderTemplateResult
      fields:
        message: string!
        success: bool!
        templateId: string!
    - name: AutoSendConfig
      fields:
        account: AccountAutoSendConfig!
        auth: AuthAutoSendConfig!
        organization: OrganizationAutoSendConfig!
        session: SessionAutoSendConfig!
    - name: UpdateProvider_req
      fields:
        config: '!'
        isActive: bool!
        isDefault: bool!
    - name: CreateABTestVariant_req
      fields:
        body: string!
        name: string!
        subject: string!
        weight: int!
    - name: GetSettingsResult
      fields:
        settings: NotificationSettingsDTO!
    - name: TemplateAnalyticsDTO
      fields:
        clickRate: float64!
        deliveryRate: float64!
        openRate: float64!
        templateId: string!
        templateName: string!
        totalClicked: int64!
        totalDelivered: int64!
        totalOpened: int64!
        totalSent: int64!
    - name: GetNotificationDetailResult
      fields:
        notification: NotificationHistoryDTO!
    - name: AccountAutoSendConfig
      fields:
        deleted: bool!
        email_change_request: bool!
        email_changed: bool!
        password_changed: bool!
        reactivated: bool!
        suspended: bool!
        username_changed: bool!
    - name: DeclareABTestWinner_req
      fields:
        abTestGroup: string!
        winnerId: string!
    - name: NotificationPreviewResponse
      fields:
        body: string!
        subject: string!
    - name: NotificationListResponse
      fields:
        notifications: '[]!'
        total: int!
    - name: RenderTemplateRequest
      fields:
        "": string
    - name: GetNotificationDetailInput
      fields:
        notificationId: string!
    - name: SessionAutoSendConfig
      fields:
        all_revoked: bool!
        device_removed: bool!
        new_device: bool!
        new_location: bool!
        suspicious_login: bool!
    - name: ProvidersConfig
      fields:
        email: EmailProviderConfig!
        sms: '*SMSProviderConfig!'
    - name: NotificationStatusResponse
      fields:
        status: string!
    - name: GetNotificationRequest
      fields:
        "": string
    - name: UpdateProviderRequest
      fields:
        "": string
    - name: GetTemplateVersionRequest
      fields:
        "": string
    - name: RestoreTemplateVersionRequest
      fields:
        "": string
    - name: SessionAutoSendDTO
      fields:
        allRevoked: bool!
        deviceRemoved: bool!
        newDevice: bool!
        newLocation: bool!
        suspiciousLogin: bool!
    - name: AnalyticsDTO
      fields:
        byDay: '[]DailyAnalyticsDTO!'
        byTemplate: '[]TemplateAnalyticsDTO!'
        overview: OverviewStatsDTO!
        topTemplates: '[]TemplatePerformanceDTO!'
    - name: SaveBuilderTemplateInput
      fields:
        builderJson: string!
        name: string!
        subject: string!
        templateId: string!
        templateKey: string!
    - name: PreviewTemplate_req
      fields:
        variables: '!'
    - name: TrackNotificationEvent_req
      fields:
        event: string!
        eventData: ""
        notificationId: string!
        organizationId: '*string'
        templateId: string!
    - name: GetTemplateRequest
      fields:
        "": string
    - name: UpdateTemplateRequest
      fields:
        "": string
    - name: PreviewTemplateRequest
      fields:
        "": string
    - name: ListTemplatesResult
      fields:
        pagination: PaginationDTO!
        templates: '[]TemplateDTO!'
    - name: PreviewTemplateResult
      fields:
        body: string!
        renderedAt: string!
        subject: string!
    - name: TemplateDTO
      fields:
        active: bool!
        appId: string!
        body: string!
        createdAt: string!
        id: string!
        isDefault: bool!
        isModified: bool!
        language: string!
        metadata: '!'
        name: string!
        subject: string!
        templateKey: string!
        type: string!
        updatedAt: string!
        variables: '[]string!'
    - name: GetProvidersResult
      fields:
        providers: ProvidersConfigDTO!
    - name: mockNotificationProvider
      fields:
        "": '[]mockSentNotification'
    - name: mockSentNotification
      fields:
        "": time.Time
    - name: TestProviderResult
      fields:
        message: string!
        success: bool!
    - name: TemplatePerformanceDTO
      fields:
        clickRate: float64!
        openRate: float64!
        templateId: string!
        templateName: string!
        totalSent: int64!
    - name: OrganizationAutoSendDTO
      fields:
        deleted: bool!
        invite: bool!
        memberAdded: bool!
        memberLeft: bool!
        memberRemoved: bool!
        roleChanged: bool!
        transfer: bool!
    - name: SMSProviderConfig
      fields:
        config: '!'
        from: string!
        provider: string!
    - name: RenderTemplate_req
      fields:
        template: string!
        variables: '!'
    - name: GetTemplateAnalyticsRequest
      fields:
        "": string
    - name: AuthAutoSendDTO
      fields:
        emailOtp: bool!
        magicLink: bool!
        mfaCode: bool!
        passwordReset: bool!
        verificationEmail: bool!
        welcome: bool!
    - name: UpdateProvidersInput
      fields:
        emailProvider: '*EmailProviderDTO!'
        smsProvider: '*SMSProviderDTO!'
    - name: SMSProviderDTO
      fields:
        config: '!'
        enabled: bool!
        type: string!
    - name: ListNotificationsHistoryInput
      fields:
        limit: int!
        page: int!
        recipient: '*string!'
        status: '*string!'
        type: '*string!'
    - name: Config
      fields:
        add_default_templates: bool!
        allow_app_overrides: bool!
        allow_template_reset: bool!
        app_name: string!
        async: AsyncConfig!
        auto_populate_templates: bool!
        auto_send: AutoSendConfig!
        auto_send_welcome: bool!
        cleanup_after: time.Duration!
        default_language: string!
        providers: ProvidersConfig!
        rate_limits: '!'
        retry_attempts: int!
        retry_delay: time.Duration!
    - name: NotificationWebhookResponse
      fields:
        status: string!
    - name: TemplateService
      fields:
        "": '*notification.Service'
    - name: ResendNotificationRequest
      fields:
        "": string
    - name: GetTemplateResult
      fields:
        template: TemplateDTO!
    - name: CreateTemplateInput
      fields:
        body: string!
        language: string!
        metadata: '!'
        name: string!
        subject: string!
        templateKey: string!
        type: string!
        variables: '[]string!'
    - name: CreateTemplateResult
      fields:
        message: string!
        success: bool!
        template: TemplateDTO!
    - name: DeleteTemplateInput
      fields:
        templateId: string!
    - name: GetAnalyticsResult
      fields:
        analytics: AnalyticsDTO!
