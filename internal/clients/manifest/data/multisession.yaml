plugin_id: multisession
version: 1.0.0
routes:
    - name: List
      description: List returns sessions for the current user with optional filtering
      method: GET
      path: /multi-session/list
      request:
        active: '*bool!'
        createdFrom: '*string!'
        createdTo: '*string!'
        ipAddress: '*string!'
        limit: int!
        offset: int!
        sortBy: '*string!'
        sortOrder: '*string!'
        userAgent: '*string!'
      request_type: ListSessionsRequest
      response_type: ListSessionsResponse
    - name: SetActive
      description: SetActive switches the current session cookie to the provided session id
      method: POST
      path: /multi-session/set-active
      request:
        id: string!
      response:
        session: '*session.Session!'
        token: string!
      request_type: SetActiveRequest
      response_type: SessionTokenResponse
    - name: Delete
      description: Delete revokes a session by id for the current user
      method: POST
      path: /multi-session/delete/{id}
      response_type: StatusResponse
    - name: GetCurrent
      description: GetCurrent returns details about the currently active session
      method: GET
      path: /multi-session/current
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: GetByID
      description: GetByID returns details about a specific session by ID
      method: GET
      path: /multi-session/{id}
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: RevokeAll
      description: RevokeAll revokes all sessions for the current user
      method: POST
      path: /multi-session/revoke-all
      request:
        includeCurrentSession: bool!
      response:
        revokedCount: int!
        status: string!
      request_type: RevokeAllRequest
      response_type: RevokeResponse
    - name: RevokeOthers
      description: RevokeOthers revokes all sessions except the current one
      method: POST
      path: /multi-session/revoke-others
      response:
        revokedCount: int!
        status: string!
      response_type: RevokeResponse
    - name: Refresh
      description: Refresh extends the current session's expiry time
      method: POST
      path: /multi-session/refresh
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: GetStats
      description: GetStats returns aggregated session statistics for the current user
      method: GET
      path: /multi-session/stats
      response:
        activeSessions: int!
        deviceCount: int!
        locationCount: int!
        newestSession: '*string!'
        oldestSession: '*string!'
        totalSessions: int!
      response_type: SessionStatsResponse
types:
    - name: RevokeAllUserSessionsResult
      fields:
        message: string!
        revokedCount: int!
        success: bool!
    - name: PaginationInfoDTO
      fields:
        currentPage: int!
        pageSize: int!
        totalItems: int64!
        totalPages: int!
    - name: GetSettingsResult
      fields:
        settings: SettingsDTO!
    - name: SessionDTO
      fields:
        browser: string!
        browserVersion: string!
        createdAt: time.Time!
        deviceInfo: string!
        deviceType: string!
        expiresAt: time.Time!
        expiresIn: string!
        id: string!
        ipAddress: string!
        isActive: bool!
        isExpiring: bool!
        lastUsed: string!
        os: string!
        osVersion: string!
        status: string!
        userAgent: string!
        userEmail: string!
        userId: string!
    - name: ListSessionsRequest
      fields:
        active: '*bool!'
        createdFrom: '*string!'
        createdTo: '*string!'
        ipAddress: '*string!'
        limit: int!
        offset: int!
        sortBy: '*string!'
        sortOrder: '*string!'
        userAgent: '*string!'
    - name: SessionStats
      fields:
        "": '*session.Session'
    - name: GetSessionStatsInput
      fields:
        appId: string!
    - name: GetUserSessionsInput
      fields:
        appId: string!
        page: int!
        pageSize: int!
        userId: string!
    - name: UpdateSettingsInput
      fields:
        allowCrossPlatform: '*bool!'
        appId: string!
        enableDeviceTracking: '*bool!'
        maxSessionsPerUser: int!
        sessionExpiryHours: int!
    - name: SessionDetailDTO
      fields:
        appId: string!
        browser: string!
        browserVersion: string!
        createdAt: time.Time!
        createdAtFormatted: string!
        deviceInfo: string!
        deviceType: string!
        environmentId: string!
        expiresAt: time.Time!
        expiresAtFormatted: string!
        id: string!
        ipAddress: string!
        isActive: bool!
        isExpiring: bool!
        lastRefreshedAt: '*time.Time!'
        lastRefreshedFormatted: string!
        organizationId: string!
        os: string!
        osVersion: string!
        status: string!
        updatedAt: time.Time!
        updatedAtFormatted: string!
        userAgent: string!
        userEmail: string!
        userId: string!
    - name: DashboardExtension
      fields:
        "": string
    - name: SessionTokenResponse
      fields:
        session: '*session.Session!'
        token: string!
    - name: RevokeAllUserSessionsInput
      fields:
        appId: string!
        userId: string!
    - name: Handler
      fields:
        "": '*Service'
    - name: RevokeAllRequest
      fields:
        includeCurrentSession: bool!
    - name: mockSessionService
      fields:
        "": '*bun.DB'
    - name: MultiSessionErrorResponse
      fields:
        error: string!
    - name: RevokeSessionInput
      fields:
        appId: string!
        sessionId: string!
    - name: GetUserSessionsResult
      fields:
        activeCount: int!
        pagination: PaginationInfoDTO!
        sessions: '[]SessionDTO!'
        totalCount: int!
        userId: string!
    - name: GetSettingsInput
      fields:
        appId: string!
    - name: sessionStats
      fields:
        "": int
    - name: SetActiveRequest
      fields:
        id: string!
    - name: GetSessionsInput
      fields:
        appId: string!
        device: string!
        page: int!
        pageSize: int!
        search: string!
        status: string!
        userId: string!
    - name: GetSessionsResult
      fields:
        pagination: PaginationInfoDTO!
        sessions: '[]SessionDTO!'
        stats: SessionStatsDTO!
    - name: GetSessionInput
      fields:
        appId: string!
        sessionId: string!
    - name: GetSessionStatsResult
      fields:
        stats: SessionStatsDTO!
    - name: SettingsDTO
      fields:
        allowCrossPlatform: bool!
        enableDeviceTracking: bool!
        maxSessionsPerUser: int!
        sessionExpiryHours: int!
    - name: RevokeResponse
      fields:
        revokedCount: int!
        status: string!
    - name: GetSessionResult
      fields:
        session: SessionDetailDTO!
    - name: SessionStatsDTO
      fields:
        activeCount: int!
        desktopCount: int!
        expiredCount: int!
        expiringCount: int!
        mobileCount: int!
        tabletCount: int!
        totalSessions: int64!
        uniqueUsers: int!
    - name: DeviceInfo
      fields:
        "": bool
    - name: Config
      fields:
        allowCrossPlatform: bool!
        enableDeviceTracking: bool!
        maxSessionsPerUser: int!
        sessionExpiryHours: int!
    - name: Service
      fields:
        "": '*auth.Service'
    - name: UpdateSettingsResult
      fields:
        message: string!
        settings: SettingsDTO!
        success: bool!
    - name: SessionStatsResponse
      fields:
        activeSessions: int!
        deviceCount: int!
        locationCount: int!
        newestSession: '*string!'
        oldestSession: '*string!'
        totalSessions: int!
    - name: Plugin
      fields:
        "": '*DashboardExtension'
    - name: RevokeSessionResult
      fields:
        message: string!
        success: bool!
