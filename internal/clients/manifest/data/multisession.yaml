plugin_id: multisession
version: 1.0.0
base_path: /multi-session
routes:
    - name: List
      description: List returns sessions for the current user based on cookie with optional filtering
      method: GET
      path: /list
      request:
        active: '*bool!'
        createdFrom: '*string!'
        createdTo: '*string!'
        ipAddress: '*string!'
        limit: int!
        offset: int!
        sortBy: '*string!'
        sortOrder: '*string!'
        userAgent: '*string!'
      request_type: ListSessionsRequest
      response_type: ListSessionsResponse
    - name: SetActive
      description: SetActive switches the current session cookie to the provided session id
      method: POST
      path: /set-active
      request:
        id: string!
      response:
        session: '*session.Session!'
        token: string!
      request_type: SetActiveRequest
      response_type: SessionTokenResponse
    - name: Delete
      description: Delete revokes a session by id for the current user
      method: POST
      path: /delete/{id}
      response_type: StatusResponse
    - name: GetCurrent
      description: GetCurrent returns details about the currently active session
      method: GET
      path: /current
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: GetByID
      description: GetByID returns details about a specific session by ID
      method: GET
      path: /{id}
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: RevokeAll
      description: RevokeAll revokes all sessions for the current user
      method: POST
      path: /revoke-all
      request:
        includeCurrentSession: bool!
      response:
        revokedCount: int!
        status: string!
      request_type: RevokeAllRequest
      response_type: RevokeResponse
    - name: RevokeOthers
      description: RevokeOthers revokes all sessions except the current one
      method: POST
      path: /revoke-others
      response:
        revokedCount: int!
        status: string!
      response_type: RevokeResponse
    - name: Refresh
      description: Refresh extends the current session's expiry time
      method: POST
      path: /refresh
      response:
        session: '*session.Session!'
        token: string!
      response_type: SessionTokenResponse
    - name: GetStats
      description: GetStats returns aggregated session statistics for the current user
      method: GET
      path: /stats
      response:
        activeSessions: int!
        deviceCount: int!
        locationCount: int!
        newestSession: '*string!'
        oldestSession: '*string!'
        totalSessions: int!
      response_type: SessionStatsResponse
types:
    - name: SetActiveRequest
      fields:
        id: string!
    - name: MultiSessionErrorResponse
      fields:
        error: string!
    - name: SessionStatsResponse
      fields:
        activeSessions: int!
        deviceCount: int!
        locationCount: int!
        newestSession: '*string!'
        oldestSession: '*string!'
        totalSessions: int!
    - name: Plugin
      fields:
        "": '*Service'
    - name: SessionTokenResponse
      fields:
        session: '*session.Session!'
        token: string!
    - name: Service
      fields:
        "": session.ServiceInterface
    - name: ListSessionsRequest
      fields:
        active: '*bool!'
        createdFrom: '*string!'
        createdTo: '*string!'
        ipAddress: '*string!'
        limit: int!
        offset: int!
        sortBy: '*string!'
        sortOrder: '*string!'
        userAgent: '*string!'
    - name: SessionStats
      fields:
        "": int
    - name: RevokeResponse
      fields:
        revokedCount: int!
        status: string!
    - name: RevokeAllRequest
      fields:
        includeCurrentSession: bool!
    - name: mockSessionService
      fields:
        "": '*bun.DB'
    - name: DeviceInfo
      fields:
        "": bool
    - name: Config
      fields:
        allowCrossPlatform: bool!
        enableDeviceTracking: bool!
        maxSessionsPerUser: int!
        sessionExpiryHours: int!
    - name: DashboardExtension
      fields:
        "": '*dashboard.ExtensionRegistry'
    - name: sessionStats
      fields:
        "": int
    - name: Handler
      fields:
        "": '*Service'
