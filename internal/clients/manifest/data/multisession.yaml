plugin_id: multisession
version: 1.0.0
routes:
    - name: List
      description: List returns sessions for the current user based on cookie
      method: GET
      path: /list
      response:
        sessions: '!'
      response_type: SessionsResponse
    - name: SetActive
      description: SetActive switches the current session cookie to the provided session id
      method: POST
      path: /set-active
      request:
        id: string!
      response:
        session: '!'
        token: string!
      request_type: SetActive_body
      response_type: SessionTokenResponse
    - name: Delete
      description: Delete revokes a session by id for the current user
      method: POST
      path: /delete/{id}
      response_type: StatusResponse
types:
    - name: SetActive_body
      fields:
        id: string!
    - name: MultiSessionSetActiveResponse
      fields:
        session: '!'
        token: string!
    - name: Service
      fields:
        "": '*auth.Service'
    - name: DashboardExtension
      fields:
        "": '*dashboard.ExtensionRegistry'
    - name: SessionTokenResponse
      fields:
        session: '!'
        token: string!
    - name: mockSessionService
      fields:
        "": '*bun.DB'
    - name: Plugin
      fields:
        "": Config
    - name: Config
      fields:
        allowCrossPlatform: bool!
        enableDeviceTracking: bool!
        maxSessionsPerUser: int!
        sessionExpiryHours: int!
    - name: MultiSessionErrorResponse
      fields:
        error: string!
    - name: MultiSessionListResponse
      fields:
        sessions: '[]!'
    - name: MultiSessionDeleteResponse
      fields:
        status: string!
    - name: Handler
      fields:
        "": '*Service'
    - name: SessionsResponse
      fields:
        sessions: '!'
