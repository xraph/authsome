plugin_id: organization
version: 1.0.0
description: Organization and team management
base_path: /api/auth

types:
  - name: Organization
    description: Organization
    fields:
      id: string!
      name: string!
      slug: string!
      metadata: object
      createdAt: string!
      updatedAt: string!

  - name: Member
    description: Organization member
    fields:
      id: string!
      userId: string!
      organizationId: string!
      role: string!
      createdAt: string!

  - name: Team
    description: Team within organization
    fields:
      id: string!
      organizationId: string!
      name: string!
      description: string
      createdAt: string!

  - name: TeamMember
    description: Team member
    fields:
      id: string!
      teamId: string!
      userId: string!
      role: string!
      createdAt: string!

  - name: Role
    description: User role
    fields:
      id: string!
      organizationId: string!
      name: string!
      description: string
      permissions: string[]!
      createdAt: string!

  - name: Policy
    description: Access policy
    fields:
      id: string!
      organizationId: string!
      name: string!
      effect: string!
      actions: string[]!
      resources: string[]!
      conditions: object

routes:
  - name: CreateOrganization
    description: Create a new organization
    method: POST
    path: /orgs
    auth: true
    request:
      name: string!
      slug: string!
      metadata: object
    response:
      organization: Organization!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated
      - code: 409
        description: Slug already exists

  - name: GetOrganizations
    description: List user organizations
    method: GET
    path: /orgs
    auth: true
    response:
      organizations: Organization[]!
    errors:
      - code: 401
        description: Not authenticated

  - name: GetOrganizationByID
    description: Get organization by ID
    method: GET
    path: /orgs/{id}
    auth: true
    params:
      id: string!
    response:
      organization: Organization!
    errors:
      - code: 401
        description: Not authenticated
      - code: 404
        description: Organization not found

  - name: UpdateOrganization
    description: Update organization
    method: POST
    path: /orgs/update
    auth: true
    request:
      organizationId: string!
      name: string
      metadata: object
    response:
      organization: Organization!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated
      - code: 404
        description: Organization not found

  - name: DeleteOrganization
    description: Delete organization
    method: POST
    path: /orgs/delete
    auth: true
    request:
      organizationId: string!
    response:
      success: boolean!
    errors:
      - code: 401
        description: Not authenticated
      - code: 404
        description: Organization not found

  - name: CreateMember
    description: Add member to organization
    method: POST
    path: /orgs/members
    auth: true
    request:
      organizationId: string!
      userId: string!
      role: string!
    response:
      member: Member!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated
      - code: 409
        description: Member already exists

  - name: GetMembers
    description: List organization members
    method: GET
    path: /orgs/members
    auth: true
    query:
      organizationId: string!
    response:
      members: Member[]!
    errors:
      - code: 401
        description: Not authenticated
      - code: 404
        description: Organization not found

  - name: UpdateMember
    description: Update member role
    method: POST
    path: /orgs/members/update
    auth: true
    request:
      memberId: string!
      role: string!
    response:
      member: Member!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated
      - code: 404
        description: Member not found

  - name: DeleteMember
    description: Remove member from organization
    method: POST
    path: /orgs/members/delete
    auth: true
    request:
      memberId: string!
    response:
      success: boolean!
    errors:
      - code: 401
        description: Not authenticated
      - code: 404
        description: Member not found

  - name: CreateRole
    description: Create a new role
    method: POST
    path: /orgs/roles
    auth: true
    request:
      organizationId: string!
      name: string!
      description: string
      permissions: string[]!
    response:
      role: Role!
    errors:
      - code: 400
        description: Invalid request data
      - code: 401
        description: Not authenticated

  - name: GetRoles
    description: List organization roles
    method: GET
    path: /orgs/roles
    auth: true
    query:
      organizationId: string!
    response:
      roles: Role[]!
    errors:
      - code: 401
        description: Not authenticated

