plugin_id: passkey
version: 1.0.0
base_path: /passkey
routes:
    - name: BeginRegister
      description: BeginRegister initiates passkey registration with WebAuthn challenge
      method: POST
      path: /register/begin
    - name: FinishRegister
      description: FinishRegister completes passkey registration with attestation verification
      method: POST
      path: /register/finish
    - name: BeginLogin
      description: BeginLogin initiates passkey authentication with WebAuthn challenge
      method: POST
      path: /login/begin
    - name: FinishLogin
      description: FinishLogin completes passkey authentication with signature verification
      method: POST
      path: /login/finish
    - name: List
      description: List retrieves all passkeys for a user
      method: GET
      path: /list
    - name: Update
      description: Update updates a passkey's metadata (name)
      method: PUT
      path: /:id
    - name: Delete
      description: Delete removes a passkey
      method: DELETE
      path: /:id
      response_type: StatusResponse
types:
    - name: DeletePasskeyRequest
      fields:
        "": string
    - name: GetPasskeyRequest
      fields:
        "": string
    - name: BeginRegisterResponse
      fields:
        challenge: string!
        options: '!'
        timeout: time.Duration!
        userId: string!
    - name: FinishRegisterResponse
      fields:
        createdAt: time.Time!
        credentialId: string!
        name: string!
        passkeyId: string!
        status: string!
    - name: BeginLoginResponse
      fields:
        challenge: string!
        options: '!'
        timeout: time.Duration!
    - name: Handler
      fields:
        "": '*Service'
    - name: BeginRegisterRequest
      fields:
        authenticatorType: string!
        name: string!
        requireResidentKey: bool!
        userId: string!
        userVerification: string!
    - name: FinishRegisterRequest
      fields:
        name: string!
        response: '!'
        userId: string!
    - name: LoginResponse
      fields:
        passkeyUsed: string!
        session: '!'
        token: string!
        user: '!'
    - name: Service
      fields:
        "": '*bun.DB'
    - name: UserAdapter
      fields:
        "": '[]webauthn.Credential'
    - name: WebAuthnWrapper
      fields:
        "": Config
    - name: BeginLoginRequest
      fields:
        userId: string!
        userVerification: string!
    - name: ListPasskeysRequest
      fields:
        "": string
    - name: UpdatePasskeyRequest
      fields:
        "": string
        name: string!
    - name: ListPasskeysResponse
      fields:
        count: int!
        passkeys: '[]PasskeyInfo!'
    - name: ChallengeSession
      fields:
        "": time.Time
    - name: RedisChallengeStore
      fields: {}
    - name: Config
      fields:
        attestationtype: string!
        authenticatorattachment: string!
        challengestorage: string!
        requireresidentkey: bool!
        rpid: string!
        rpname: string!
        rporigins: '[]string!'
        timeout: time.Duration!
        userverification: string!
    - name: PasskeyInfo
      fields:
        aaguid: string!
        authenticatorType: string!
        createdAt: time.Time!
        credentialId: string!
        id: string!
        isResidentKey: bool!
        lastUsedAt: '*time.Time!'
        name: string!
        signCount: uint32!
    - name: UpdatePasskeyResponse
      fields:
        name: string!
        passkeyId: string!
        updatedAt: time.Time!
    - name: MemoryChallengeStore
      fields:
        "": ""
    - name: Plugin
      fields:
        "": '*bun.DB'
    - name: FinishLoginRequest
      fields:
        remember: bool!
        response: '!'
