plugin_id: emailverification
version: 1.0.0
routes:
    - name: Send
      description: |-
        Send handles manual verification email sending
        POST /email-verification/send
      method: POST
      path: /email-verification/send
      request:
        email: string!
      response:
        devToken: string!
        status: string!
      request_type: SendRequest
      response_type: SendResponse
    - name: Verify
      description: |-
        Verify handles email verification via token
        GET /email-verification/verify?token=xyz
      method: GET
      path: /email-verification/verify
      request:
        "": string
      response:
        session: '*session.Session!'
        success: bool!
        token: string!
        user: '*user.User!'
      request_type: VerifyRequest
      response_type: VerifyResponse
    - name: Resend
      description: |-
        Resend handles resending verification email
        POST /email-verification/resend
      method: POST
      path: /email-verification/resend
      request:
        email: string!
      response:
        status: string!
      request_type: ResendRequest
      response_type: ResendResponse
types:
    - name: Handler
      fields:
        "": core.Authsome
    - name: VerificationRepository
      fields:
        "": '*bun.DB'
    - name: Service
      fields:
        "": '*notificationPlugin.Adapter'
    - name: SendRequest
      fields:
        email: string!
    - name: ResendResponse
      fields:
        status: string!
    - name: StatusResponse
      fields:
        emailVerified: bool!
        emailVerifiedAt: '*time.Time!'
    - name: Plugin
      fields:
        "": core.Authsome
    - name: Config
      fields:
        autoLoginAfterVerify: bool!
        autoSendOnSignup: bool!
        devExposeToken: bool!
        expiryHours: int!
        maxResendPerHour: int!
        tokenLength: int!
        verificationURL: string!
    - name: SendResponse
      fields:
        devToken: string!
        status: string!
    - name: VerifyRequest
      fields:
        "": string
    - name: VerifyResponse
      fields:
        session: '*session.Session!'
        success: bool!
        token: string!
        user: '*user.User!'
    - name: ResendRequest
      fields:
        email: string!
