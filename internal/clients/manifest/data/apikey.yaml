plugin_id: apikey
version: 1.0.0
routes:
    - name: CreateAPIKey
      description: CreateAPIKey handles POST /api-keys
      method: POST
      path: /createapikey
      request:
        allowed_ips: '[]string'
        description: string
        metadata: ""
        name: string!
        permissions: ""
        rate_limit: int
        scopes: '[]string!'
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      request_type: CreateAPIKey_reqBody
      response_type: CreateAPIKeyResponse
    - name: ListAPIKeys
      description: ListAPIKeys handles GET /api-keys
      method: GET
      path: /listapikeys
    - name: GetAPIKey
      description: GetAPIKey handles GET /api-keys/:id
      method: GET
      path: /:id
    - name: UpdateAPIKey
      description: UpdateAPIKey handles PATCH /api-keys/:id
      method: PUT
      path: /:id
      request_type: apikey.UpdateAPIKeyRequest
    - name: DeleteAPIKey
      description: DeleteAPIKey handles DELETE /api-keys/:id
      method: DELETE
      path: /:id
      response_type: MessageResponse
    - name: RotateAPIKey
      description: RotateAPIKey handles POST /api-keys/:id/rotate
      method: POST
      path: /:id/rotate
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      response_type: RotateAPIKeyResponse
    - name: VerifyAPIKey
      description: VerifyAPIKey handles POST /api-keys/verify
      method: POST
      path: /verify
      request_type: apikey.VerifyAPIKeyRequest
types:
    - name: IPWhitelistConfig
      fields:
        enabled: bool!
        strict_mode: bool!
    - name: CreateAPIKeyResponse
      fields:
        api_key: '*apikey.APIKey!'
        message: string!
    - name: RotateAPIKeyResponse
      fields:
        api_key: '*apikey.APIKey!'
        message: string!
    - name: RolesResponse
      fields:
        roles: '[]*apikey.Role!'
    - name: CreateAPIKey_reqBody
      fields:
        allowed_ips: '[]string'
        description: string
        metadata: ""
        name: string!
        permissions: ""
        rate_limit: int
        scopes: '[]string!'
    - name: AssignRole_reqBody
      fields:
        roleID: string!
    - name: WebhookConfig
      fields:
        enabled: bool!
        expiry_warning_days: int!
        notify_on_created: bool!
        notify_on_deleted: bool!
        notify_on_expiring: bool!
        notify_on_rate_limit: bool!
        notify_on_rotated: bool!
        webhook_urls: '[]string!'
    - name: AutoCleanupConfig
      fields:
        enabled: bool!
        interval: time.Duration!
    - name: Handler
      fields:
        "": Config
    - name: Middleware
      fields:
        "": '*ratelimit.Service'
    - name: Plugin
      fields:
        "": '*Handler'
    - name: Config
      fields:
        allow_query_param: bool!
        auto_cleanup: AutoCleanupConfig!
        default_expiry: time.Duration!
        default_rate_limit: int!
        ip_whitelisting: IPWhitelistConfig!
        key_length: int!
        max_keys_per_org: int!
        max_keys_per_user: int!
        max_rate_limit: int!
        rate_limiting: RateLimitConfig!
        webhooks: WebhookConfig!
    - name: RateLimitConfig
      fields:
        enabled: bool!
        window: time.Duration!
