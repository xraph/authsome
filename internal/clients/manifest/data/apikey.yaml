plugin_id: apikey
version: 1.0.0
base_path: /api-keys
routes:
    - name: CreateAPIKey
      description: CreateAPIKey handles API key creation
      method: POST
      path: /createapikey
      request:
        allowed_ips: '[]string!'
        description: string!
        metadata: '!'
        name: string!
        permissions: '!'
        rate_limit: int!
        scopes: '[]string!'
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      request_type: CreateAPIKeyRequest
      response_type: CreateAPIKeyResponse
    - name: RotateAPIKey
      description: RotateAPIKey handles API key rotation
      method: POST
      path: /:id/rotate
      request:
        "": string
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      request_type: RotateAPIKeyRequest
      response_type: RotateAPIKeyResponse
    - name: CreateAPIKey
      description: CreateAPIKey handles POST /api-keys
      method: POST
      path: /createapikey
      request:
        allowed_ips: '[]string!'
        description: string!
        metadata: '!'
        name: string!
        permissions: '!'
        rate_limit: int!
        scopes: '[]string!'
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      request_type: CreateAPIKeyRequest
      response_type: CreateAPIKeyResponse
    - name: ListAPIKeys
      description: ListAPIKeys handles GET /api-keys
      method: GET
      path: /listapikeys
      request:
        "": '*bool'
      request_type: ListAPIKeysRequest
      response_type: ListAPIKeysResponse
    - name: GetAPIKey
      description: GetAPIKey handles GET /api-keys/:id
      method: GET
      path: /:id
      request:
        "": string
      request_type: GetAPIKeyRequest
      response_type: APIKey
    - name: UpdateAPIKey
      description: UpdateAPIKey handles PATCH /api-keys/:id
      method: PUT
      path: /:id
      request:
        "": string
        allowed_ips: '[]string!'
        description: '*string!'
        metadata: '!'
        name: '*string!'
        permissions: '!'
        rate_limit: '*int!'
        scopes: '[]string!'
      request_type: UpdateAPIKeyRequest
      response_type: APIKey
    - name: DeleteAPIKey
      description: DeleteAPIKey handles DELETE /api-keys/:id
      method: DELETE
      path: /:id
      request:
        "": string
      request_type: DeleteAPIKeyRequest
      response_type: MessageResponse
    - name: RotateAPIKey
      description: RotateAPIKey handles POST /api-keys/:id/rotate
      method: POST
      path: /:id/rotate
      request:
        "": string
      response:
        api_key: '*apikey.APIKey!'
        message: string!
      request_type: RotateAPIKeyRequest
      response_type: RotateAPIKeyResponse
    - name: VerifyAPIKey
      description: VerifyAPIKey handles POST /api-keys/verify
      method: POST
      path: /verify
      request:
        key: string!
      request_type: VerifyAPIKeyRequest
      response_type: VerifyAPIKeyResponse
types:
    - name: CreateAPIKeyResponse
      fields:
        api_key: '*apikey.APIKey!'
        message: string!
    - name: IPWhitelistConfig
      fields:
        enabled: bool!
        strict_mode: bool!
    - name: RotateAPIKeyRequest
      fields:
        "": string
    - name: GetEffectivePermissionsRequest
      fields:
        "": string
    - name: RotateAPIKeyResponse
      fields:
        api_key: '*apikey.APIKey!'
        message: string!
    - name: Middleware
      fields:
        "": Config
    - name: Config
      fields:
        allow_query_param: bool!
        auto_cleanup: AutoCleanupConfig!
        default_expiry: time.Duration!
        default_rate_limit: int!
        ip_whitelisting: IPWhitelistConfig!
        key_length: int!
        max_keys_per_org: int!
        max_keys_per_user: int!
        max_rate_limit: int!
        rate_limiting: RateLimitConfig!
        webhooks: WebhookConfig!
    - name: WebhookConfig
      fields:
        enabled: bool!
        expiry_warning_days: int!
        notify_on_created: bool!
        notify_on_deleted: bool!
        notify_on_expiring: bool!
        notify_on_rate_limit: bool!
        notify_on_rotated: bool!
        webhook_urls: '[]string!'
    - name: Handler
      fields:
        "": '*apikey.Service'
    - name: CreateAPIKeyRequest
      fields:
        allowed_ips: '[]string!'
        description: string!
        metadata: '!'
        name: string!
        permissions: '!'
        rate_limit: int!
        scopes: '[]string!'
    - name: UpdateAPIKeyRequest
      fields:
        "": string
        allowed_ips: '[]string!'
        description: '*string!'
        metadata: '!'
        name: '*string!'
        permissions: '!'
        rate_limit: '*int!'
        scopes: '[]string!'
    - name: DeleteAPIKeyRequest
      fields:
        "": string
    - name: RolesResponse
      fields:
        roles: '[]*apikey.Role!'
    - name: Plugin
      fields:
        "": '*apikey.Service'
    - name: ScopeDefinition
      fields:
        "": string
    - name: DashboardExtension
      fields:
        "": '*dashboard.ExtensionRegistry'
    - name: VerifyAPIKeyRequest
      fields:
        key: string!
    - name: UnassignRoleRequest
      fields:
        "": string
    - name: RateLimitConfig
      fields:
        enabled: bool!
        window: time.Duration!
    - name: AutoCleanupConfig
      fields:
        enabled: bool!
        interval: time.Duration!
    - name: KeyStats
      fields:
        "": int
    - name: ListAPIKeysRequest
      fields:
        "": '*bool'
    - name: GetAPIKeyRequest
      fields:
        "": string
    - name: AssignRoleRequest
      fields:
        "": string
        roleID: string!
    - name: GetRolesRequest
      fields:
        "": string
