plugin_id: impersonation
version: 1.0.0
routes:
    - name: StartImpersonation
      description: StartImpersonation handles POST /impersonation/start
      method: POST
      path: /impersonation/start
      response:
        impersonator_id: string!
        session_id: string!
        started_at: string!
        target_user_id: string!
      response_type: ImpersonationStartResponse
    - name: EndImpersonation
      description: EndImpersonation handles POST /impersonation/end
      method: POST
      path: /impersonation/end
      response:
        ended_at: string!
        status: string!
      response_type: ImpersonationEndResponse
    - name: GetImpersonation
      description: GetImpersonation handles GET /impersonation/:id
      method: GET
      path: /impersonation/:id
      response_type: ImpersonationSession
    - name: ListImpersonations
      description: ListImpersonations handles GET /impersonation
      method: GET
      path: /impersonation/
      response_type: ImpersonationListResponse
    - name: ListAuditEvents
      description: ListAuditEvents handles GET /impersonation/audit
      method: GET
      path: /impersonation/audit
      response_type: ImpersonationAuditResponse
    - name: VerifyImpersonation
      description: VerifyImpersonation handles GET /impersonation/verify/:sessionId
      method: POST
      path: /impersonation/verify
      response:
        impersonator_id: string!
        is_impersonating: bool!
        target_user_id: string!
      response_type: ImpersonationVerifyResponse
types:
    - name: GetImpersonationRequest
      fields:
        "": string
    - name: ListAuditEventsRequest
      fields:
        "": string
    - name: ImpersonationContext
      fields:
        impersonation_id: '*xid.ID!'
        impersonator_id: '*xid.ID!'
        indicator_message: string!
        is_impersonating: bool!
        target_user_id: '*xid.ID!'
    - name: ImpersonationMiddleware
      fields:
        "": Config
    - name: Plugin
      fields:
        "": ""
    - name: ImpersonationSession
      fields: {}
    - name: ImpersonationVerifyResponse
      fields:
        impersonator_id: string!
        is_impersonating: bool!
        target_user_id: string!
    - name: ImpersonationErrorResponse
      fields:
        error: string!
    - name: ImpersonationEndResponse
      fields:
        ended_at: string!
        status: string!
    - name: mockImpersonationRepository
      fields:
        "": ""
    - name: Config
      fields:
        audit_all_actions: bool!
        auto_cleanup_enabled: bool!
        cleanup_interval: time.Duration!
        default_duration_minutes: int!
        impersonate_permission: string!
        indicator_message: string!
        max_duration_minutes: int!
        min_duration_minutes: int!
        min_reason_length: int!
        require_permission: bool!
        require_reason: bool!
        require_ticket: bool!
        show_indicator: bool!
        webhook_on_end: bool!
        webhook_on_start: bool!
        webhook_urls: '[]string!'
    - name: StartImpersonationRequest
      fields:
        duration_minutes: int!
        reason: string!
        target_user_id: string!
        ticket_number: string!
    - name: ListImpersonationsRequest
      fields:
        "": '*bool'
    - name: VerifyImpersonationRequest
      fields:
        "": string
    - name: ImpersonationStartResponse
      fields:
        impersonator_id: string!
        session_id: string!
        started_at: string!
        target_user_id: string!
    - name: mockUserService
      fields:
        "": ""
    - name: Handler
      fields:
        "": Config
    - name: EndImpersonationRequest
      fields:
        impersonation_id: string!
        reason: string!
    - name: mockSessionService
      fields:
        "": ""
